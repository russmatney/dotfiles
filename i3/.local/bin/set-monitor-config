#!/usr/bin/env bash

choice=${1}

supported="yoshi yoshi-plus-monitor yoshi-only-monitor algo"

if [ -z $choice ]; then
  select opt in $supported; do
    choice=$opt
    break
  done
elif [[ " ${supported[*]} " != *" $choice "* ]]; then
  echo "$choice not fully supported. Supported: $supported"
  supported="$supported $choice"
  select opt in $supported; do
    choice=$opt
    break
  done
fi

echo "Switching to configuration: $choice"

if [ $choice == "yoshi" ]; then
    xrandr \
        --output eDP-1 --auto \
        --output DP-2 --off
    i3-msg mode "default"
elif [ $choice == "yoshi-plus-monitor" ]; then
    xrandr \
        --output eDP-1 --auto \
        --output DP-2 --above eDP-1
    i3-msg mode "default"
elif [ $choice == "yoshi-only-monitor" ]; then
    xrandr \
        --output eDP-1 --off \
        --output DP-2 --auto
    i3-msg mode "default"
elif [ $choice == "algo" ]; then
    xrandr \
        --output DP-4 --mode 3840x2160
        # --output HDMI-0 --mode 3840x2160
    i3-msg mode "default"
else
    echo "Unhandled configuration name: $choice"
fi
